const form_ = $("#formy")
const search_term = $(".search")
const select_term = $("#exampleFormControlSelect1")
let search_query = "";
const results = $("#results")
const limit = 25;
form_.on("submit", (e) => {
    e.preventDefault();
    search_query = search_term.val();
    //search_term.val() = "";
    search(search_query, limit)
})

function search(search_query, limit) {
    fetch(`http://www.reddit.com/search.json?q=${search_query}`)
        .then((res) => res.json())
        .then((data) => {
            let array_of_data = (data.data.children.map(data => data.data))
            console.log(array_of_data)
            for (let data_card of array_of_data) {
                console.log(data_card)
                results.append(`
                <div class="card">
                  <img src="${(data_card.preview)?data_card.preview.images[0].source.url:"data:image/jpeg;base64,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"}" class="card-img-top" alt="...">
                  <div class="card-body">
                   <h5 class="card-title">${data_card.title}</h5>
                   <p class="card-text">${data_card.selftext.substring(0,50)}....</p>
                   <a href="${data_card.permalink}" class="btn btn-primary">Go somewhere</a>
                   <br>
                   <h6>Subreddit: <span class="badge badge-secondary">${data_card.subreddit}</span></h6>
                   </div>
                </div>`)
            }
        })

    .catch((err) => { console.log(err) })
}